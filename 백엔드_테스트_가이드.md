# 🧪 백엔드 테스트 가이드

## ❌ 죄송합니다!

저는 **샌드박스 환경에서 장기 실행 서버를 실행할 수 없습니다**.

**제약사항:**
- ❌ FastAPI 서버를 계속 실행 상태로 유지 불가
- ❌ 외부 네트워크(MySQL, FTP) 접속 제한
- ❌ 포트를 열어서 브라우저 접속 불가

---

## ✅ 하지만 이렇게 도와드릴 수 있습니다!

### 1️⃣ **DB/FTP 연결 테스트 (로컬에서)**

백엔드 서버 실행 전에 DB와 FTP 연결을 미리 테스트할 수 있습니다!

```bash
연결테스트.bat (더블클릭)
```

**테스트 항목:**
- ✅ MySQL 데이터베이스 연결
- ✅ FTP 서버 연결
- ✅ gallery_images 테이블 확인
- ✅ products 테이블 확인

**출력 예시:**
```
🔍 MySQL 데이터베이스 연결 테스트
✅ DB 연결 성공!
   현재 DB: sansam
   테이블 개수: 3
   테이블 목록:
      - gallery_images
      - products
      - orders

🔍 FTP 서버 연결 테스트
✅ FTP 연결 성공!
   현재 디렉토리: /
   ✅ 기본 폴더 존재: /sansam/
   하위 폴더 목록:
      - farm
      - ginseng
      - process
      - package
      - license
      - products

📊 테스트 결과 요약
✅ DB 연결
✅ FTP 연결
✅ gallery_images 테이블
✅ products 테이블

🎉 모든 테스트 성공!
```

---

### 2️⃣ **백엔드 서버 실행 (로컬에서)**

연결 테스트가 성공하면 백엔드 서버를 실행하세요!

```bash
서버실행_FastAPI.bat (더블클릭)
```

**자동 처리:**
- ✅ Python 가상환경 자동 생성
- ✅ 필요한 패키지 자동 설치
- ✅ FastAPI 서버 자동 실행
- ✅ 브라우저 자동 열기

**정상 실행 확인:**
```
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
```

---

### 3️⃣ **코드 검증 (제가 해드립니다!)**

제가 할 수 있는 것:
- ✅ 코드 문법 오류 검사
- ✅ API 엔드포인트 로직 검증
- ✅ DB/FTP 연결 코드 확인
- ✅ 에러 시나리오 예측 및 수정
- ✅ 보안 취약점 확인

---

## 🎯 추천 테스트 순서

### 1단계: 연결 테스트
```bash
연결테스트.bat
```
→ DB/FTP 연결 확인

### 2단계: 백엔드 서버 실행
```bash
서버실행_FastAPI.bat
```
→ FastAPI 서버 시작

### 3단계: 관리자 페이지 테스트
```
http://localhost:8000/admin
```
→ 갤러리 업로드 테스트

### 4단계: 메인 페이지 확인
```
http://localhost:8000
```
→ 갤러리/상품 표시 확인

---

## 🐛 문제 해결

### ❌ "DB 연결 실패"

**가능한 원인:**
1. MySQL 서버가 실행되지 않음
2. 방화벽에서 포트 3307 차단
3. DB 설정이 잘못됨

**해결:**
```python
# main.py의 DB 설정 확인
DB_CONFIG = {
    'host': 'bitnmeta2.synology.me',
    'port': 3307,
    'user': 'iyrc',
    'password': 'dodan1004~!@',
    'database': 'sansam'
}
```

### ❌ "FTP 연결 실패"

**가능한 원인:**
1. FTP 서버가 실행되지 않음
2. 방화벽에서 포트 2121 차단
3. FTP 설정이 잘못됨

**해결:**
```python
# main.py의 FTP 설정 확인
FTP_CONFIG = {
    'host': 'bitnmeta2.synology.me',
    'port': 2121,
    'user': 'ha',
    'password': 'dodan1004~',
    'base_path': '/sansam/'
}
```

### ❌ "테이블이 없습니다"

**해결:**
```bash
# database/schema.sql 파일을 MySQL에서 실행
mysql -h bitnmeta2.synology.me -P 3307 -u iyrc -p sansam < database/schema.sql
```

---

## 📁 테스트 파일

- **test_connection.py** - DB/FTP 연결 테스트 스크립트
- **연결테스트.bat** - Windows용 테스트 실행 파일

---

## 🎉 요약

**제가 샌드박스에서 직접 실행할 수는 없지만:**

1. ✅ 연결 테스트 스크립트 제공
2. ✅ 자동 실행 배치 파일 제공
3. ✅ 코드 검증 및 디버깅 지원
4. ✅ 상세한 에러 해결 가이드 제공

**로컬에서 2단계로 쉽게 테스트하세요:**
```bash
1. 연결테스트.bat (DB/FTP 확인)
2. 서버실행_FastAPI.bat (백엔드 실행)
```

🎊 **성공!**
