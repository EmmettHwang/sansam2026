# 📊 팜랜드 산양산삼 프로젝트 현황 요약

**업데이트**: 2026-01-21 06:15  
**버전**: v1.2.20260121-0615

---

## 🔧 개발 환경

### Conda 가상환경
- **환경 이름**: `sansam2026`
- **Python 버전**: 3.8+
- **패키지 관리**: pip (conda 환경 내부)

### 버전 관리 규칙
- **포맷**: `메이저.마이너.날짜시간`
- **예시**: `1.0.20260121-0541`
  - **메이저**: 1 (대규모 업데이트 시 변경)
  - **마이너**: 0 → 1 → 2 → 3... ✅ **수정할 때마다 증가!**
  - **날짜시간**: YYYYMMDD-HHMM (실제 수정 시간)

### 버전 업데이트 예시
```
v1.0.20260121-0541  (현재)
v1.1.20260121-0545  (첫 번째 수정, 마이너 0→1)
v1.2.20260121-0550  (두 번째 수정, 마이너 1→2)
v1.3.20260121-0555  (세 번째 수정, 마이너 2→3)
```

---

## ✅ 완료된 기능

### 🎯 핵심 시스템
- [x] **FastAPI 백엔드** - Python 3.8+, FastAPI 0.104.1
- [x] **MySQL 데이터베이스** - bitnmeta2.synology.me:3307
- [x] **FTP 파일 저장** - bitnmeta2.synology.me:2121
  - 저장 경로: `/homes/ha/sansam/`
  - 5개 카테고리 폴더: farm, ginseng, process, package, license
  - 자동 폴더 생성 및 권한 관리

### 🖼️ 갤러리 시스템
- [x] **드래그 앤 드롭 업로드** - admin.html에서 직관적 UI
- [x] **다중 파일 업로드** - 한 번에 여러 이미지 선택 가능
- [x] **FTP 자동 저장** - 업로드 시 FTP 서버로 자동 전송
- [x] **로컬 캐시 시스템** - `images/cache/` 폴더에 캐시
  - 첫 로드: FTP → 로컬 저장
  - 이후 로드: 로컬 캐시 사용 (빠른 속도)
- [x] **카테고리별 관리**
  - 🏞️ 재배지 (farm)
  - 🌿 산양산삼 (ginseng)
  - ⚙️ 선별과정 (process)
  - 📦 포장 (package)
  - 📄 인허가 (license)
- [x] **대표 이미지 자동 설정** - 첫 업로드 이미지가 대표
- [x] **실시간 썸네일 미리보기** - 업로드 후 즉시 표시

### 🛒 간단구매 시스템
- [x] **상품 CRUD** - 등록/조회/수정/삭제
- [x] **상품 이미지 업로드** - 드래그 앤 드롭
- [x] **재고 관리** - 기본 999개
- [x] **가격 표시** - 원화 표시
- [x] **주문 시스템** - 무통장 입금 안내
- [x] **상품 활성화/비활성화** - is_active 플래그

### 🎨 프론트엔드
- [x] **메인 페이지** (index.html)
  - Hero 섹션 (그라데이션 배경)
  - Trust Grid (4개 항목 동적 로드)
  - 갤러리 섹션 (6개 카테고리 + products)
  - 상품 섹션 (간단구매)
  - FAQ 아코디언
  - 플로팅 전화/문자 버튼
- [x] **관리자 페이지** (admin.html)
  - 갤러리 탭 (카테고리별 업로드)
  - 간단구매 탭 (상품 관리)
  - 드래그 앤 드롭 UI
  - 실시간 썸네일 미리보기
- [x] **반응형 디자인** - 모바일 최적화
- [x] **파비콘** - 山 한자 SVG

### 🔧 개발 환경
- [x] **서버 설정 스크립트** (server_setup.py)
  - FTP 폴더 생성
  - DB 테이블 생성
  - 전체 상태 확인
  - 통합 메뉴 시스템
- [x] **서버 실행 배치** (서버실행_FastAPI.bat)
- [x] **버전 관리 시스템** - 4개 파일 동기화
  - README.md (배지)
  - main.py (VERSION 상수)
  - admin.html (Footer)
  - index.html (Footer)

### 🐛 해결된 문제
- [x] **422 Validation Error** - FormData 필드명 통일 (`images`)
- [x] **CSS/JS 404 Error** - 캐시 무효화 (버전 쿼리 파라미터)
- [x] **hero-bg.jpg 404** - 그라데이션 배경으로 교체
- [x] **JavaScript 문법 오류** - 중복 코드 제거
- [x] **상품 조회 안 됨** - `active=1` 쿼리 파라미터 수정
- [x] **Trust Grid 이미지 안 보임** - 동적 로드로 전환

---

## 🎯 다음 단계

### 1️⃣ 갤러리 이미지 업로드 (최우선!)
현재 5개 카테고리에 이미지가 없어서 메인 페이지에 Placeholder가 표시되고 있습니다.

**해야 할 일:**
```
Admin 페이지 → 갤러리 탭
- 🏞️ 재배지 (farm) → 이미지 업로드
- 🌿 산양산삼 (ginseng) → 이미지 업로드
- ⚙️ 선별과정 (process) → 이미지 업로드
- 📦 포장 (package) → 이미지 업로드
- 📄 인허가 (license) → 이미지 업로드
```

### 2️⃣ 메인 페이지 최종 점검
- [ ] Trust Grid 4개 항목 이미지 표시 확인
- [ ] 갤러리 섹션 6개 카테고리 표시 확인
- [ ] 상품 섹션 표시 확인
- [ ] FAQ 아코디언 작동 확인
- [ ] 플로팅 버튼 작동 확인
- [ ] 반응형 디자인 (모바일) 확인

### 3️⃣ Live 카메라 (나중에)
- [ ] IP 카메라 주소 확보
- [ ] main.py에서 'live' 카테고리 주석 해제
- [ ] server_setup.py에서 'live' 카테고리 주석 해제
- [ ] 실시간 영상 스트리밍 구현

### 4️⃣ GitHub 배포
```bash
git add .
git commit -m "feat: 갤러리 이미지 업로드 완료"
git push origin main
```

---

## 🗂️ 파일 구조

### 주요 파일
```
sansam2026/
├── index.html                 # 메인 페이지
├── admin.html                 # 관리자 페이지
├── main.py                    # FastAPI 백엔드
├── server_setup.py            # 서버 설정 스크립트
├── README.md                  # 프로젝트 문서
├── requirements.txt           # Python 패키지
├── 서버설정.bat               # 서버 설정 (Windows)
├── 서버실행_FastAPI.bat       # 서버 실행 (Windows)
└── 서버실행_FastAPI.sh        # 서버 실행 (Mac/Linux)
```

### 정적 파일
```
sansam2026/
├── css/
│   └── style.css
├── js/
│   └── script.js
├── images/
│   └── cache/                 # 로컬 캐시 (.gitignore)
│       ├── farm/
│       ├── ginseng/
│       ├── process/
│       ├── package/
│       ├── license/
│       └── products/
├── database/
│   └── schema.sql
└── favicon.svg
```

### 불필요한 파일 제거 완료
- ~~버전_자동_관리_시스템.md~~
- ~~422_에러_완전_해결_가이드.md~~
- ~~이미지_캐시_시스템_완료.md~~
- ~~CSS_JS_404_해결.md~~
- ~~Live_카테고리_추가_완료.md~~
- ~~import_live_images.py~~
- ~~Live이미지_등록.bat~~

---

## 🚀 실행 방법

### 1️⃣ 서버 시작
```cmd
서버실행_FastAPI.bat
```

### 2️⃣ 브라우저 접속
- **메인**: http://localhost:8000
- **관리자**: http://localhost:8000/admin
- **API 문서**: http://localhost:8000/docs

### 3️⃣ 이미지 업로드
1. Admin 페이지 접속
2. 갤러리 탭 클릭
3. 카테고리 카드 클릭
4. 이미지 드래그 앤 드롭
5. 업로드 완료 확인

---

## 📊 현재 상태

### ✅ 완료
- 서버 실행 환경 구축
- API 엔드포인트 구현
- 관리자 페이지 UI
- 메인 페이지 UI
- 이미지 업로드 시스템
- 상품 관리 시스템
- 버전 관리 시스템
- 로컬 캐시 시스템
- 문제 해결 (422, 404, JS 에러)

### 🎯 진행 중
- 갤러리 이미지 업로드 (지금!)

### ⏰ 대기
- Live 카메라 (IP 주소 확보 후)
- GitHub 배포

---

## 🔗 연결 정보

### 데이터베이스
- **Host**: bitnmeta2.synology.me
- **Port**: 3307
- **User**: iyrc
- **Database**: sansam

### FTP
- **Host**: bitnmeta2.synology.me
- **Port**: 2121
- **User**: ha
- **Path**: /homes/ha/sansam/

### 사업자 정보
- **상호**: 팜랜드
- **대표**: 신성식
- **사업자등록번호**: 621-78-00335
- **주소**: 강원도 원주시 소초면 학곡리 산88
- **연락처**: 010-2512-6818
- **상담시간**: 08:00 ~ 20:00 (연중무휴)

---

## 🎉 다음 할 일 요약

1. **지금 바로**: Admin → 갤러리 탭에서 5개 카테고리 이미지 업로드
2. **확인**: 메인 페이지 새로고침 → Trust Grid + 갤러리 이미지 표시 확인
3. **배포**: GitHub 푸시

---

**Made with ❤️ by 팜랜드 산양산삼**
